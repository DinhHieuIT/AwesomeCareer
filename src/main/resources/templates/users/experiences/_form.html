<!DOCTYPE html>
<html
	th:replace="~{layout/application :: layout(~{::title}, ~{::body}, ~{})}"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
	<main class="container">
		<section class="row">
			<div class="col-8 offset-2">
				<form th:action="@{/user/{id}/experience}" th:method="POST" th:object="${experienceModel}">
					<div class="card">
						<div class="card-header">
							<b>Edit Profile</b>
						</div>
						<div class="card-body">
							<div class="row">
								<div class="col">
									<div class="form-group">
										<label for="company">Company</label> <input type="text"
											class="form-control" th:field="*{companyName}" id="company"
											aria-describedby="companyHid" placeholder="Company">
										<small id="companyHid" class="form-text text-muted">Company
											is required !</small>
									</div>
									<div class="form-group">
										<label for="title">Title</label> <input type="text"
											class="form-control" th:field="*{jobTitle}" id="title"
											aria-describedby="titleHid" placeholder="Title"> <small
											id="titleHid" class="form-text text-muted">Title is
											required !</small>
									</div>
									<!-- Example split danger button -->
									<div class="btn-group">
										<select class="form-select"
											aria-label="Default select example" th:field="*{startYear}">
											<option selected></option>
											<option th:each="year : ${years}" th:text="${year.name}"
												th:value="${year.name}"></option>
										</select>
									</div>

									<div class="btn-group">
										<select class="form-select"
											aria-label="Default select example" th:field="*{startMonth}">
											<option th:each="month : ${months}"
												th:text="${month.name}" th:value="${month.name}"></option>
										</select>
									</div>

									<div class="btn-group">--</div>

									<div class="btn-group">
										<select class="form-select"
											aria-label="Default select example" th:field="*{endYear}">
											<option th:each="year : ${years}" th:text="${year.name}"
												th:value="${year.name}"></option>
										</select>
									</div>

									<div class="btn-group">
										<select class="form-select"
											aria-label="Default select example" th:field="*{endMonth}">
											<option th:each="month : ${months}"
												th:text="${month.name}" th:value="${month.name}"></option>
										</select>
									</div>

									<div class="form-check">
										<input class="form-check-input" type="checkbox" value=""
											id="flexCheckDefault" th:field="*{}"> <label
											class="form-check-label" for="flexCheckDefault"> I
											currently work here </label>
									</div>

									<div class="form-check">
										<input class="form-check-input" type="checkbox" value=""
											id="flexCheckChecked" checked> <label
											class="form-check-label" for="flexCheckChecked">
											Internship </label>
									</div>

									<div class="form-group">
										<label for="exampleFormControlTextarea1">Description</label>
										<textarea class="form-control"
											id="exampleFormControlTextarea1" rows="3"></textarea>
									</div>
								</div>
							</div>
						</div>

						<div class="card-footer text-muted">
							<button class="btn btn-success" id="_delete" 
							th:href="@{/experience/{experienceModel.id}/delete}">Delete</button>
							<button class="btn btn-success">Cancel</button>
							<button class="btn btn-success" id="_update">Update</button>
						</div>
					</div>
				</form>
			</div>
		</section>
	</main>
	<script>
    $('#_update').submit(function(event){
    	
    	event.preventDefault();
    	event.stopPropagation();
    	var form = $(this);
    	var companyName = $(this).find('input[field="companyName"]').val();
    	var jobTitle =$(this).find('input[field="jobTitle"]').val();
    	var startYear =$(this).find('input[field="startYear"]').val();
    	var startMonth=$(this).find('input[field="startMonth"]').val();
    	var endYear = $(this).find('input[field="endYear"]').val();
    	var endMoth=$(this).find('input[field="endMonth"]').val();
    	var currentlyWork=$(this).find('input[field="currentlyWork"]').val();
    	var internship =$(this).find('input[field="internship"]').val();
    	var description=$(this).find('input[field="description"]').val();
    	$.ajax({
    		type : 'POST',
    		url : $(this).attr('action'),
    		data: {
    			'companyName': companyName,
    			'jobTitle': jobTitle,
    			'startYear': companyName,
    			'startMonthe': companyName,
    			'endYear': companyName,
    			'endMonth': companyName,
    			'currentlyWork': companyName,
    			'internship': internship,
    			'description': companyName,
    			success : function(data, textStatus, xhr){
    				$('#experience_show').append(data);
    			}
    		}
    		})
    	});
    
    </script>
   <script>
		$('#_delete').click(function(event){
			event.preventDefault();
			event.stopPropagation();
			$.ajax({
				type : 'DELETE',
				url : $(this).attr('href'),
				success : function(data, textStatus, xhr){
					$('#experience_show').html(data);
				}
				
			});
		});
		
		</script>
</body>
</html>